version: '3.8'

services:
  web:
    # 1) 방금 Docker Hub에 올린 이미지 주소를 적으세요.
    image: 내ID/pirostagram:v1.0  
    
    # 2) 컨테이너가 죽었을 때 자동으로 다시 시작하게 합니다.
    restart: always
    
    # 3) 외부 포트(8000)와 컨테이너 포트(8000)를 연결합니다.
    ports:
      - "8000:8000"
    
    # 4) 환경 변수 설정 (DB 비밀번호나 시크릿 키를 여기에 둘 수 있습니다.)
    environment:
      - DEBUG=True
      - SECRET_KEY=your_secret_key_here
    
    # 5) 볼륨 설정 (중요! sqlite3 DB 파일을 보존하려면 필요합니다.)
    # 로컬의 ./db.sqlite3와 컨테이너 안의 파일을 연결해서 컨테이너를 꺼도 데이터가 남게 합니다.
    volumes:
      - ./db.sqlite3:/app/db.sqlite3